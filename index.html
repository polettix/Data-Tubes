<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Data::Tubes by polettix</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Data::Tubes</h1>
        <p class="header">Text and data canalising</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/polettix/Data-Tubes/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/polettix/Data-Tubes/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/polettix/Data-Tubes">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/polettix">polettix</a></p>


      </header>
      <section>
        <p>This module allows you to define <em>Tubes</em>, which are little more than transformation subroutines over records.</p>

<p>One example, fast!</p>

<div class="highlight highlight-source-perl"><pre><span class="pl-k">use</span> Data::Tubes <span class="pl-s"><span class="pl-pds">qw&lt;</span> drain summon <span class="pl-pds">&gt;</span></span>;

<span class="pl-c"># Load components from relevant plugins</span>
summon(
   <span class="pl-s"><span class="pl-pds">qw&lt;</span></span>
<span class="pl-s">      +Plumbing::sequence</span>
<span class="pl-s">      +Source::iterate_files</span>
<span class="pl-s">      +Reader::read_by_line</span>
<span class="pl-s">      +Parser::parse_hashy</span>
<span class="pl-s">      +Renderer::render_with_template_perlish</span>
<span class="pl-s">      +Writer::write_to_files</span>
<span class="pl-s">   <span class="pl-pds">&gt;</span></span>
);

<span class="pl-c"># define a simple Template::Perlish template</span>
<span class="pl-k">my</span> <span class="pl-smi">$template</span> = <span class="pl-pds"><span class="pl-s">&lt;&lt;'END'</span></span>;<span class="pl-s"></span>
<span class="pl-s">Hello [% name %], [% question %]?</span>
<span class="pl-s"></span><span class="pl-pds">END</span>

<span class="pl-c"># define a tube made of a sequence of tubes, each of the relevant</span>
<span class="pl-c"># type and doing its specific job.</span>
<span class="pl-k">my</span> <span class="pl-smi">$sequence</span> = sequence(
   <span class="pl-c1">tubes</span> <span class="pl-k">=&gt;</span> [
      iterate_files(<span class="pl-c1">files</span> <span class="pl-k">=&gt;</span> \<span class="pl-smi">@inputs</span>),
      read_by_line(),
      parse_hashy(<span class="pl-c1">chunks_separator</span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>|<span class="pl-pds">'</span></span>),
      render_with_template_perlish(<span class="pl-c1">template</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">$template</span>),
      write_to_files(<span class="pl-c1">filename</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">$output</span>),
   ],
);

<span class="pl-c"># just "drain" whatever comes out of the tube, we're not really</span>
<span class="pl-c"># interesting in collecting output records as they are already</span>
<span class="pl-c"># written by write_to_file. This is necessary so that the actions are</span>
<span class="pl-c"># actually "run", as of now $sequence is only a promise to do some</span>
<span class="pl-c"># work.</span>
drain(<span class="pl-smi">$sequence</span>);</pre></div>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
